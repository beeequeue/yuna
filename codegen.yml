overwrite: true

schema:
  - 'https://graphql.anilist.co'
  - 'src/graphql/client-schema.graphqls'

documents:
  - 'src/**/*.{graphql,ts}'
  - '!**/*.d.ts'

config:
  avoidOptionals: true
  noNamespaces: true

hooks:
  afterOneFileWrite:
    - prettier --write

generates:
  src/graphql/generated/types.ts:
    plugins:
      - add:
          content: '/* THIS IS A GENERATED FILE */'
      - add:
          content: '/* eslint-disable */'
      - typescript
      - typescript-operations
      - typescript-compatibility
    config:
      avoidOptionals: true
      strict: true # compatibility only
  src/graphql/generated/introspection-result.ts:
    plugins:
      - add:
          content: '/* THIS IS A GENERATED FILE */'
      - add:
          content: '/* eslint-disable */'
      - fragment-matcher
    config:
      apolloClientVersion: 2
